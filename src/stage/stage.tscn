[gd_scene load_steps=18 format=3 uid="uid://e7jihf677gx2"]

[ext_resource type="Script" path="res://src/stage/stage.gd" id="1_iaxbk"]
[ext_resource type="PackedScene" uid="uid://b0bxiobvelbs0" path="res://src/entities/creature/healthy_creature.tscn" id="2_dpvoq"]
[ext_resource type="PackedScene" uid="uid://6f3hygpsdmwo" path="res://src/entities/player/player.tscn" id="3_haygi"]
[ext_resource type="PackedScene" uid="uid://b7qdnfpx0cdak" path="res://src/entities/creature/infected_creature.tscn" id="3_yguvu"]
[ext_resource type="Script" path="res://src/stage/unpausable.gd" id="4_4iknr"]
[ext_resource type="PackedScene" uid="uid://cqkcad7t71pwt" path="res://src/stage/city_scene.tscn" id="4_7q7vx"]
[ext_resource type="PackedScene" uid="uid://cpysboj23eaxd" path="res://src/entities/goal.tscn" id="5_27dnd"]
[ext_resource type="Texture2D" uid="uid://ukpu3buflwcm" path="res://assets/city_mat.png" id="6_f6d4e"]
[ext_resource type="PackedScene" uid="uid://6ghh3v87x3px" path="res://src/ui/HUD/HUD.tscn" id="6_thxyv"]
[ext_resource type="PackedScene" uid="uid://bbd54mtbluw6e" path="res://src/stage/camera_controller.tscn" id="8_mnsto"]
[ext_resource type="PackedScene" uid="uid://dknfhais6weqa" path="res://src/entities/background/stage_hazard.tscn" id="8_sj7rg"]
[ext_resource type="PackedScene" uid="uid://ci60qjlrea1yt" path="res://src/entities/background/stage_hazard2.tscn" id="9_d7rrn"]
[ext_resource type="PackedScene" uid="uid://b1u3n0k81xcft" path="res://src/entities/background/stage_hazard3.tscn" id="11_5dwva"]
[ext_resource type="PackedScene" uid="uid://dd6mtvhpu4njv" path="res://src/entities/background/stage_hazard4.tscn" id="12_vng7v"]
[ext_resource type="PackedScene" uid="uid://dodl3g1smpiq1" path="res://src/entities/background/stage_hazard5.tscn" id="13_fji1s"]

[sub_resource type="FastNoiseLite" id="FastNoiseLite_3iao6"]
noise_type = 3
frequency = 0.017
fractal_octaves = 2
fractal_lacunarity = 1.0
fractal_gain = 0.1
fractal_weighted_strength = 0.41

[sub_resource type="ViewportTexture" id="ViewportTexture_elk8j"]
viewport_path = NodePath("SubViewport")

[node name="Stage" type="Node2D"]
script = ExtResource("1_iaxbk")
healthy_scene = ExtResource("2_dpvoq")
infected_scene = ExtResource("3_yguvu")

[node name="Unpausable" type="Node" parent="."]
process_mode = 3
script = ExtResource("4_4iknr")

[node name="SubViewport" type="SubViewport" parent="."]
transparent_bg = true
size = Vector2i(1920, 1080)

[node name="CityScene" parent="SubViewport" instance=ExtResource("4_7q7vx")]
unique_name_in_owner = true

[node name="Creatures" type="Node2D" parent="."]
unique_name_in_owner = true

[node name="Player" parent="." instance=ExtResource("3_haygi")]

[node name="Goal" parent="." instance=ExtResource("5_27dnd")]
position = Vector2(728, 0)

[node name="Background" type="Sprite2D" parent="."]
z_index = -1
position = Vector2(2.67029e-05, 1.52588e-05)
scale = Vector2(1.47126, 1.85666)
texture = ExtResource("6_f6d4e")

[node name="Hazards" type="Node2D" parent="."]
unique_name_in_owner = true

[node name="StageHazard2" parent="Hazards" instance=ExtResource("9_d7rrn")]
position = Vector2(-184, -245)

[node name="StageHazard" parent="Hazards" instance=ExtResource("8_sj7rg")]
position = Vector2(-200, 0)

[node name="StageHazard3" parent="Hazards" instance=ExtResource("11_5dwva")]
position = Vector2(-443, -286)
rotation = 3.14159

[node name="StageHazard4" parent="Hazards" instance=ExtResource("12_vng7v")]
position = Vector2(-534, -128)

[node name="StageHazard5" parent="Hazards" instance=ExtResource("13_fji1s")]
position = Vector2(52, -129)

[node name="CameraController" parent="." node_paths=PackedStringArray("scene3d") instance=ExtResource("8_mnsto")]
scene3d = NodePath("../SubViewport/CityScene")
noise = SubResource("FastNoiseLite_3iao6")

[node name="3DSprite" parent="CameraController/CameraAnchor" index="1"]
texture = SubResource("ViewportTexture_elk8j")

[node name="Hud" parent="CameraController/CameraAnchor" index="2" instance=ExtResource("6_thxyv")]
anchors_preset = 15
anchor_top = 0.0
offset_left = -960.0
offset_top = 281.0
offset_right = 960.0
offset_bottom = 540.0
grow_vertical = 2
metadata/_edit_use_anchors_ = true

[node name="CanvasLayer" type="CanvasLayer" parent="."]

[node name="Fade" type="ColorRect" parent="CanvasLayer"]
unique_name_in_owner = true
modulate = Color(1, 1, 1, 0)
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
mouse_filter = 2
color = Color(0, 0, 0, 1)

[editable path="CameraController"]
